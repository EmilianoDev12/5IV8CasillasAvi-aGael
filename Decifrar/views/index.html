<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Descifrar</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>
        <div class="container">
            <br>
            <form class="card border-primary mb-3" action="/files" method="post" enctype="multipart/form-data">
                <div class="card-header">Descifrando hermano</div>
                <div class="card-body text-primary">
                    <label>Txt a descifrar</label>
                    <input name="archivo" type="file" id="file" onchange="return fileValidation()"/>
                    <br>
                    <label>Contraseña</label>
                    <input type="text" name="pass">
                    <select name="tipo">
                        <option value="128">128</option>
                        <option value="192">192</option>
                        <option value="256">256</option>
                    </select>
                    <br>
                    <button class="btn btn-primary" type="submit">Subir</button>
                </div>
            </form>
            <div class="container">
                <h3>Casillas Aviña Gael Emiliano 5IV8</h3>
            </div>
        </div>
        <script>
            function fileValidation(){
                var fileInput = document.getElementById('file');
                var filePath = fileInput.value;
                var allowedExtensions = /(.txt)$/i;
                if(!allowedExtensions.exec(filePath)){
                    alert('Please upload file having extensions .txt only.');
                    fileInput.value = '';
                    return false;
                }else{
                    //Image preview
                    if (fileInput.files && fileInput.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function(e) {
                            document.getElementById('imagePreview').innerHTML = '<img src="'+e.target.result+'"/>';
                        };
                        reader.readAsDataURL(fileInput.files[0]);
                    }
                }
            }
        </script>
    </body>
</html>